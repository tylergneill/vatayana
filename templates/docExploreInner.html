<h1>$query_id <small><small>($query_section)</small></small></h1>

<div class="col-md-6" id="doc-explore-left"
     data-current="$query_id_local"
     data-first="$first_doc_id"
     data-last="$last_doc_id">

    <!-- ─── 1) DOCUMENT NAVIGATION ON docExplore ───────────────────────────────── -->
    <div class="row align-items-center g-2 mb-4">

      <div class="col-md-2">
        <form method="get" action="docExplore">
          <input type="hidden" name="doc_id" value="${query_work_name}_${first_doc_id}"/>
          <button id="btn-first-explore"
                  type="submit"
                  class="btn btn-block btn-primary btn-no-outline doc-nav-btn"
                  data-doc-id="$first_doc_id"
                  title="Go to first passage within $query_work_name ($first_doc_id)">
            «
          </button>
        </form>
      </div>

      <div class="col-md-2">
        <form method="get" action="docExplore">
          <input type="hidden" name="doc_id" value="${query_work_name}_${prev_doc_id}"/>
          <button id="btn-prev-explore"
                  type="submit"
                  class="btn btn-block btn-primary btn-no-outline doc-nav-btn"
                  data-doc-id="$prev_doc_id"
                  title="Go to previous passage within $query_work_name ($prev_doc_id)">
            ‹
          </button>
        </form>
      </div>

      <div class="col-md-4 text-center">
        <small>within <em>$query_work_name</em>:<br>doc #$query_text_pos of $query_text_doc_count</small>
      </div>

      <div class="col-md-2">
        <form method="get" action="docExplore">
          <input type="hidden" name="doc_id" value="${query_work_name}_${next_doc_id}"/>
          <button id="btn-next-explore"
                  type="submit"
                  class="btn btn-block btn-primary btn-no-outline doc-nav-btn"
                  data-doc-id="$next_doc_id"
                  title="Go to next passage within $query_work_name ($next_doc_id)">
            ›
          </button>
        </form>
      </div>

      <div class="col-md-2">
        <form method="get" action="docExplore">
          <input type="hidden" name="doc_id" value="${query_work_name}_${last_doc_id}"/>
          <button id="btn-last-explore"
                  type="submit"
                  class="btn btn-block btn-primary btn-no-outline doc-nav-btn"
                  data-doc-id="$last_doc_id"
                  title="Go to last passage within $query_work_name ($last_doc_id)">
            »
          </button>
        </form>
      </div>

    </div>

<!-- TEXT TYPE TOGGLE BLOCK -->
<div class="panel panel-default" style="margin-bottom: 10px;">
  <div class="panel-body" style="padding: 5px 10px;">

    <div class="btn-toolbar" style="margin: 0;">
      <div class="btn-group" style="margin-right: 10px; vertical-align: middle;">
        <strong style="line-height: 30px;">Text type:</strong>
      </div>
      <div class="btn-group btn-group-sm">
        <button id="btn-original"  class="btn btn-primary btn-sm">Original</button>
        <button id="btn-segmented" class="btn btn-default btn-sm">Segmented</button>
      </div>
    </div>

  </div>
</div>

<!-- TEXT CONTAINER -->
<div class="panel panel-default">
  <div id="text-container" class="panel-body">
    <!-- JS will inject the text here -->
  </div>
</div>


    <!-- 3) TOPIC ANALYSIS -->
	<div class="col-md-6 mb-5">
		<h2 class="mb-3">Topic Analysis</h2>
		<img id="plot" src="/assets/doc_plot_pngs/$query_id.png" alt="oops" width="550" height="385">
		$top_topics_summary
	</div>

    <br><br>

</div>

<div class="col-md-6 mb-5" id="doc-explore-right">

    <div>
        <h2 class="mb-3">Similar Docs of Priority Texts<span title="$priority_texts">*</span></h2>
        <br>
        $priority_col_content
    </div>

    <br><br>

<!--    <button class="btn btn-block btn-primary" onclick="show_secondary()">Show Non-Priority Results</button>-->

<!--    <div id="secondary_col_div" style='display: none;'>-->
<!--        <h2>Similar<span title="by topic">*</span> Docs of Non-Priority Texts<span title="$non_priority_texts">*</span></h2>-->
<!--        <br>-->
<!--        $secondary_col_content-->
<!--    </div>-->

</div>

<script>
	function show_secondary() {
	  var secondary_col_div = document.getElementById("secondary_col_div");
	  secondary_col_div.style.display = "block";
	}

    // original-segmented toggle

    // grab your two chunks of HTML (in your template engine these will be expanded in‐place)
    const originalHTML = `<p>$query_original_fulltext</p>`;
    const segmentedHTML = `<p>$query_segmented_fulltext</p>`;

    // cache DOM nodes
    const container = document.getElementById('text-container');
    const btnOrig   = document.getElementById('btn-original');
    const btnSeg    = document.getElementById('btn-segmented');

    function show(which) {
      container.innerHTML = (which === 'orig') ? originalHTML : segmentedHTML;

      // toggle filled / outline look
      btnOrig.classList.toggle('btn-primary',   which === 'orig');
      btnOrig.classList.toggle('btn-outline-primary', which !== 'orig');
      btnSeg .classList.toggle('btn-primary',   which === 'seg');
      btnSeg .classList.toggle('btn-outline-primary', which !== 'seg');
    }

    btnOrig.addEventListener('click', () => show('orig'));
    btnSeg .addEventListener('click', () => show('seg'));

    show('orig');   // initial load
</script>
